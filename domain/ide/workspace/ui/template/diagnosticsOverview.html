<!--
  ~ Â© 2024 Snyk Limited
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'none'; style-src 'self' 'nonce-{{.Nonce}}' 'nonce-ideNonce'; script-src 'nonce-{{.Nonce}}';">
  <!-- see docs/ui-rendering.md  -->
  <!--noformat-->
  <!-- @formatter:off -->
  <style nonce="{{.Nonce}}">{{.Styles}}</style>
  <style nonce="ideNonce" data-ide-style></style>
  <!-- @formatter:on -->
  <!--noformat-->
</head>

<body>
  <main class="issues-overview-container">
    <div class="main-tabs-nav">
      <span data-tab="all-issues" id="all-issues-tab" class="tab-item is-selected">All Issues</span>
      <span data-tab="net-new-issues" id="net-new-issues-tab" class="tab-item">Net new issues</span>
    </div>

    <div class="tab-container">
      <div id="all-issues-content" class="tab-content is-selected">
        <section class="issue-overview">
          <!-- Placeholder for All Issues content -->
          <p>No issues to display.</p>
        </section>
      </div>

      <div id="net-new-issues-content" class="tab-content">
        <!-- Content for Net New Issues -->
        <section class="issue-overview">
          {{range .RootNodes}}
          <div class="sn-list-item root-node {{if .ProductEnabled}}is-clickable{{end}}">
            <span class="sn-icon">{{.Icon}}</span>
            <span class="sn-label">{{.Text}}</span>
          </div>
          {{end}}

          {{range $file, $issues := .Issues}}
          <div class="sn-list-item file-node is-expandable {{if (index $issues 0).ProductEnabled}}is-clickable{{end}}">
            <span class="sn-icon file-icon">{{$file.Icon}}</span>
            <span class="sn-label file-path">{{$file.Text}}</span>
            <div class="sn-list issues-list">
              {{range $issues}}
              <div class="sn-list-item issue-node {{if .ProductEnabled}}is-clickable{{end}}">
                <span class="sn-icon issue-icon">{{.Icon}}</span>
                <span class="sn-label issue-label">{{.Text}}</span>
              </div>
              {{end}}
            </div>
          </div>
          {{end}}
        </section>
      </div>
    </div>
  </main>

  <script nonce="{{.Nonce}}">
    document.querySelectorAll('.tab-item').forEach(tab => {
      tab.addEventListener('click', function () {
        document.querySelectorAll('.tab-item').forEach(item => item.classList.remove('is-selected'));
        document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('is-selected'));
        this.classList.add('is-selected');
        document.getElementById(this.dataset.tab + '-content').classList.add('is-selected');
      });
    });
  </script>
</body>

</html>
